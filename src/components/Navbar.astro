---
const menus = [
  { name: "Beranda", href: "/" },
  {
    name: "Tentang Kami",
    href: "",
    children: [
      { name: "Sejarah", href: "" },
      { name: "Profil Desa", href: "" },
      { name: "Visi Misi", href: "" },
      { name: "SOTK", href: "" },
      { name: "Tupoksi", href: "" },
      { name: "Capaian", href: "" },
    ],
  },
  {
    name: "Lembaga",
    href: "",
    children: [
      { name: "BUMDes", href: "/bumdes" },
      { name: "RT/RW", href: "" },
      { name: "PKK", href: "" },
      { name: "Karang Taruna", href: "" },
      { name: "Posyandu", href: "" },
      { name: "BKM", href: "" },
    ],
  },
  {
    name: "Pelayanan Online",
    href: "",
    children: [
      { name: "Surat Pengantar Perkawainan", href: "" },
      { name: "SKCK", href: "" },
      { name: "Surat Keterangan Domisili", href: "" },
      { name: "Surat Keterangan Usaha", href: "" },
      { name: "Surat Pengantar Ijin Keramaian", href: "" },
      { name: "Aduan", href: "" },
      { name: "Dukcapil Online", href: "" },
      { name: "Identitas Kependudukan Online", href: "" },
      { name: "Cek Daftar Pemilih", href: "" },
    ],
  },
  {
    name: "Laporan",
    href: "",
    children: [
      { name: "APBDes", href: "" },
      { name: "Realisasi APBDes", href: "" },
      { name: "LPPD", href: "" },
      { name: "Asset", href: "" },
    ],
  },
  {
    name: "PPID",
    href: "",
    children: [
      { name: "Struktur", href: "" },
      { name: "Produk Hukum", href: "" },
      { name: "Keputusan Kepala Desa", href: "" },
      { name: "Keputusan BPD", href: "" },
    ],
  },
  { name: "Berita Desa", href: "" },
];
---

<!-- Desktop Menu -->
<header id="dekstop-menu" class="bg-white py-3 hidden lg:block border-b border-gray-100 relative z-50">
  <div class="container">
    <div class="flex justify-between gap-5 items-center">
      <div class="">
        <a href="/" class="flex items-center gap-2">
             <img src="./logo.svg" alt="" />
        <p class="text-xl font-semibold my-0 hidden lg:block">
          Desa Pondok Kresek
        </p>
        </a>
     
      </div>
      <div>
        <ul class="flex gap-6 items-center">
          {
            menus.map((menu) => (
              <li class="relative group">
                <a href={menu.href} class="font-medium flex items-center gap-1 py-4">
                  {menu.name}
                  {menu.children && (
                    <i data-feather="chevron-down" class="w-4 h-4 transition-transform group-hover:rotate-180 duration-300"></i>
                  )}
                </a>
                {menu.children && (
                  <div class="absolute top-full left-0 pt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 transform translate-y-2 group-hover:translate-y-0 w-64 z-50">
                    <ul class="bg-white rounded-b-lg shadow-lg border border-gray-100 overflow-hidden py-2">
                      {menu.children.map((child) => (
                        <li>
                          <a href={child.href} class="block px-4 py-2 hover:bg-gray-50 text-gray-700 hover:text-primary transition-colors">
                            {child.name}
                          </a>
                        </li>
                      ))}
                    </ul>
                  </div>
                )}
              </li>
            ))
          }
        </ul>
      </div>
    </div>
  </div>
</header>

<!-- Mobile Menu -->
<header
  id="mobile-menu"
  class="lg:hidden bg-white py-3 border-b border-gray-100 relative z-50"
  x-data="{ openMenu: false }"
>
  <div class="container">
    <div class="flex justify-between gap-5 items-center">
      <div>
        <img src="./logo.svg" alt="" class="w-10" />
      </div>
      <div>
        <button @click="openMenu = !openMenu" class="text-2xl p-2">
          <i class="bi bi-list" x-show="!openMenu"></i>
          <i class="bi bi-x" x-show="openMenu" style="display: none;"></i>
        </button>
      </div>
    </div>
    <div 
        x-show="openMenu" 
        class="fixed top-[73px] left-0 w-full h-[calc(100vh-73px)] bg-white overflow-y-auto" 
        x-transition:enter="transition ease-out duration-200"
        x-transition:enter-start="opacity-0 -translate-y-2"
        x-transition:enter-end="opacity-100 translate-y-0"
        x-transition:leave="transition ease-in duration-150"
        x-transition:leave-start="opacity-100 translate-y-0"
        x-transition:leave-end="opacity-0 -translate-y-2"
        style="display: none;"
    >
      <ul class="flex flex-col p-6 gap-2 pb-20">
        {
          menus.map((menu) => (
            <li class="border-b border-gray-100 last:border-0" x-data="{ expanded: false }">
              {menu.children ? (
                <div>
                    <button 
                        @click="expanded = !expanded" 
                        class="w-full flex justify-between items-center py-3 font-medium text-left"
                        :class="expanded ? 'text-primary' : ''"
                    >
                        {menu.name}
                        <i data-feather="chevron-down" class="w-4 h-4 transition-transform duration-300" :class="expanded ? 'rotate-180' : ''"></i>
                    </button>
                    <ul x-show="expanded" x-collapse class="pl-4 pb-3 flex flex-col gap-1 bg-gray-50 rounded-lg mb-3 mt-1" style="display: none;">
                        {menu.children.map((child) => (
                        <li>
                            <a href={child.href} class="block py-2 text-sm text-gray-600 hover:text-primary">
                            {child.name}
                            </a>
                        </li>
                        ))}
                    </ul>
                </div>
              ) : (
                <a href={menu.href} class="block py-3 font-medium">
                  {menu.name}
                </a>
              )}
            </li>
          ))
        }
      </ul>
    </div>
  </div>
</header>

<script>
    import feather from 'feather-icons';
    
    // Initialize feather icons
    document.addEventListener('astro:page-load', () => {
        feather.replace();
    });
    
    // Fallback if astro:page-load isn't available (not using ViewTransitions)
    document.addEventListener('DOMContentLoaded', () => {
        feather.replace();
    });
</script>

<style>
  @reference "../styles/global.css";

  /* link on hover and active text-secondary */
  a:hover,
  a.active,
  button:hover {
    @apply text-secondary transition-colors duration-300;
  }
</style>
